{% for conv in conversations %}
<div class="px-4 py-3 border-b border-gray-100 hover:bg-indigo-50 cursor-pointer {% if conv.unread_count > 0 %}bg-indigo-50{% endif %}"
     hx-get="/loc/{{ location.slug }}/conversations/{{ conv.id }}/messages"
     hx-target="#message-panel">
    <div class="flex items-center justify-between">
        <span class="text-sm font-medium text-gray-900">
            {% if conv.contact %}{{ conv.contact.full_name }}{% else %}Unknown{% endif %}
        </span>
        <span class="text-xs text-gray-400">{{ conv.channel }}</span>
    </div>
    <div class="flex items-center justify-between mt-1">
        <span class="text-xs text-gray-500 truncate">{{ conv.subject or '' }}</span>
        {% if conv.unread_count > 0 %}
        <span class="bg-indigo-600 text-white text-xs rounded-full px-2 py-0.5">{{ conv.unread_count }}</span>
        {% endif %}
    </div>
    {% if conv.last_message_at %}
    <div class="text-xs text-gray-400 mt-1">{{ conv.last_message_at.strftime('%b %d, %H:%M') }}</div>
    {% endif %}
</div>
{% else %}
<div class="p-4 text-gray-400 text-center text-sm">No conversations yet</div>
{% endfor %}
