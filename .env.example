# GoHighLevel API Configuration
# Get these from your GHL account settings

# API Key (Settings → Integrations → API Keys)
GHL_API_KEY=your_api_key_here

# Location ID (Settings → Business Profile → Location ID)
GHL_LOCATION_ID=your_location_id_here

# Environment mode
CRM_ENVIRONMENT=development
WF_ENVIRONMENT=development

# App auth + RBAC skeleton (disabled by default in local dev)
CRM_AUTH_ENABLED=false
CRM_AUTH_SECRET=
CRM_AUTH_COOKIE_NAME=ml_crm_session
CRM_AUTH_COOKIE_SECURE=false
CRM_AUTH_SESSION_TTL_SECONDS=86400
CRM_AUTH_RATE_LIMIT_WINDOW_SECONDS=300
CRM_AUTH_RATE_LIMIT_MAX_ATTEMPTS=10
CRM_AUTH_RATE_LIMIT_BLOCK_SECONDS=600
CRM_AUTH_INVITE_TTL_HOURS=72
CRM_AUTH_BOOTSTRAP_EMAIL=admin@example.com
CRM_AUTH_BOOTSTRAP_PASSWORD=
CRM_AUTH_BOOTSTRAP_ROLE=owner

WF_AUTH_ENABLED=false
WF_AUTH_SECRET=
WF_AUTH_COOKIE_NAME=ml_wf_session
WF_AUTH_COOKIE_SECURE=false
WF_AUTH_SESSION_TTL_SECONDS=86400
WF_AUTH_RATE_LIMIT_WINDOW_SECONDS=300
WF_AUTH_RATE_LIMIT_MAX_ATTEMPTS=10
WF_AUTH_RATE_LIMIT_BLOCK_SECONDS=600
WF_AUTH_INVITE_TTL_HOURS=72
WF_AUTH_BOOTSTRAP_EMAIL=admin@example.com
WF_AUTH_BOOTSTRAP_PASSWORD=
WF_AUTH_BOOTSTRAP_ROLE=owner

DASH_AUTH_ENABLED=false
DASH_AUTH_SECRET=
DASH_AUTH_COOKIE_NAME=ml_dash_session
DASH_AUTH_COOKIE_SECURE=false
DASH_AUTH_SESSION_TTL_SECONDS=86400
DASH_AUTH_RATE_LIMIT_WINDOW_SECONDS=300
DASH_AUTH_RATE_LIMIT_MAX_ATTEMPTS=10
DASH_AUTH_RATE_LIMIT_BLOCK_SECONDS=600
DASH_AUTH_BOOTSTRAP_EMAIL=admin@example.com
DASH_AUTH_BOOTSTRAP_PASSWORD=
DASH_AUTH_BOOTSTRAP_ROLE=owner

# Shared app URLs (used by cross-app navigation links)
DASH_DASHBOARD_URL=http://localhost:8023
DASH_CRM_URL=http://localhost:8020
DASH_HIRING_URL=http://localhost:8021
DASH_WORKFLOWS_URL=http://localhost:8022

CRM_DASHBOARD_URL=http://localhost:8023
CRM_CRM_URL=http://localhost:8020
CRM_HIRING_URL=http://localhost:8021
CRM_WORKFLOWS_URL=http://localhost:8022

WF_DASHBOARD_URL=http://localhost:8023
WF_CRM_URL=http://localhost:8020
WF_HIRING_URL=http://localhost:8021
WF_WORKFLOWS_URL=http://localhost:8022

HIRING_DASHBOARD_URL=http://localhost:8023
HIRING_CRM_URL=http://localhost:8020
HIRING_APP_URL=http://localhost:8021
HIRING_WORKFLOWS_URL=http://localhost:8022

# Database URLs (local defaults are sqlite files)
CRM_DATABASE_URL=sqlite+aiosqlite:///crm.db
WF_DATABASE_URL=sqlite+aiosqlite:///workflows.db
DASH_CRM_DATABASE_URL=sqlite+aiosqlite:///crm.db
DASH_WF_DATABASE_URL=sqlite+aiosqlite:///workflows.db
DASH_HIRING_DATABASE_URL=sqlite:///hiring.db
HIRING_DB_PATH=hiring.db

# Workflow endpoint protection (recommended in production)
WF_SECURITY_FAIL_CLOSED=false
WF_WEBHOOK_API_KEY=
WF_WEBHOOK_SIGNING_SECRET=
WF_WEBHOOK_SIGNATURE_TTL_SECONDS=300
WF_CHAT_API_KEY=
WF_WEBHOOK_ASYNC_DISPATCH=true
WF_DISPATCH_WORKER_ENABLED=true
WF_DISPATCH_POLL_INTERVAL_SECONDS=1.0
WF_DISPATCH_MAX_ATTEMPTS=3
WF_DISPATCH_RETRY_BACKOFF_SECONDS=15

# CRM tenant and webhook protection
CRM_SECURITY_FAIL_CLOSED=false
CRM_TENANT_AUTH_REQUIRED=false
# comma-separated slug:token pairs, e.g. "acme:token123,globex:token456"
CRM_TENANT_ACCESS_TOKENS=
CRM_TENANT_TOKEN_HEADER=X-Location-Token
CRM_WEBHOOKS_VERIFY_TWILIO_SIGNATURE=true
CRM_SENDGRID_INBOUND_TOKEN=
CRM_SENDGRID_INBOUND_BASIC_USER=
CRM_SENDGRID_INBOUND_BASIC_PASS=
CRM_FORM_RATE_LIMIT_WINDOW_SECONDS=60
CRM_FORM_RATE_LIMIT_MAX_SUBMISSIONS=10
CRM_FORM_RATE_LIMIT_BLOCK_SECONDS=300
CRM_FORM_HONEYPOT_FIELD=website
CRM_FORM_MIN_SUBMIT_SECONDS=0

# CRM browser fallback export execution
CRM_SYNC_BROWSER_FALLBACK_ENABLED=true
CRM_SYNC_BROWSER_TAB_ID=0
CRM_SYNC_BROWSER_EXECUTE_ENABLED=true
CRM_SYNC_BROWSER_PROFILE=ghl_session
CRM_SYNC_BROWSER_HEADLESS=false
CRM_SYNC_BROWSER_CONTINUE_ON_ERROR=true
CRM_SYNC_BROWSER_FIND_ATTEMPTS=3
CRM_SYNC_BROWSER_STEP_RETRY_WAIT_SECONDS=0.75
CRM_SYNC_BROWSER_REQUIRE_LOGIN=true
CRM_SYNC_BROWSER_PREFLIGHT_URL=https://app.gohighlevel.com/

# Optional: auto-login for browser automation (for unattended exports)
# Note: `.env` is gitignored, but still plaintext; prefer a secrets manager if possible.
CRM_SYNC_BROWSER_LOGIN_EMAIL=
CRM_SYNC_BROWSER_LOGIN_PASSWORD=
CRM_SYNC_BROWSER_LOGIN_TIMEOUT_SECONDS=120

# Workflow rebuild fidelity for browser-backed export (1=shell, 2=linear actions, 3=+trigger details)
CRM_SYNC_WORKFLOW_FIDELITY=2

# Assets (media library + attachments)
CRM_SYNC_ASSETS_ENABLED=true
# Media library can be huge; keep off unless you want it.
CRM_SYNC_ASSETS_IMPORT_MEDIA_LIBRARY=false
CRM_SYNC_ASSETS_MEDIA_LIBRARY_PAGE_SIZE=200
CRM_SYNC_ASSETS_MEDIA_LIBRARY_MAX_PAGES=25
CRM_SYNC_ASSETS_MEDIA_LIBRARY_ARCHIVE_FULL=false
CRM_SYNC_ASSETS_MEDIA_LIBRARY_ARCHIVE_SAMPLE=50

# Optionally download asset bytes during import (default off; use background jobs later)
CRM_SYNC_ASSETS_DOWNLOAD_DURING_IMPORT=false
CRM_SYNC_ASSETS_DOWNLOAD_LIMIT=200
CRM_ASSET_BLOBSTORE_DIR=data/blobstore

# Export: upload local/discovered assets to GHL Media Library (requires browser-captured `token-id`)
CRM_SYNC_ASSETS_EXPORT_ENABLED=false
CRM_SYNC_ASSETS_EXPORT_LIMIT=50
# Comma-separated Asset.source values to upload (default: funnel page assets only)
CRM_SYNC_ASSETS_EXPORT_SOURCES=funnel_page_data_uri,funnel_page_html

# Funnels fidelity: capture page-builder JSON ("page-data") into the blobstore (default on).
CRM_SYNC_FUNNELS_CAPTURE_PAGE_BUILDER_DATA=true
# Max pages to capture per run (0 = unlimited)
CRM_SYNC_FUNNELS_CAPTURE_PAGE_BUILDER_DATA_LIMIT=0
